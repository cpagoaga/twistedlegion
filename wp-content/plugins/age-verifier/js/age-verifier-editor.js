!function(e,o,t,r){function i(){this.init()}function a(){try{var e=o.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return console.log("Local storage is NOT supported!"),!1}}var n=r,c={enabled:0,mode:"age",minimum_age:18,cookie_expiration:365,animation:"pop_in",title:"Verify Your Age",text:"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante.",background:"#2997DF",background_type:"color",background_image_url:e("#placeholder_image_url").html(),text_color:"#ffffff",submit_text:"Submit",error_message:"You need to be at least [age] years old to continue.",safe_url:"#",safe_url_enabled:0,hide_site:0},l=r,d=r;e.age_verifier_uploaded_image=function(){n.update_settings(),n.update_form(),n.redraw()},e.age_verifier_get_current_settings_ref=function(){return l},e.age_verifier_get_current_settings=function(){return e.extend(!0,{},l)},e.age_verifier_init_editor=function(){l=e.extend(!0,{},c);var o=r;e.age_verifier_get_stored_settings!=r&&(o=e.extend(!0,l,e.age_verifier_get_stored_settings())),o!=r&&(l=e.extend(!0,{},o)),n=new i},i.prototype.init=function(){var o=this;e("body").css({opacity:1}),e("html").css({opacity:1}),this.disable_events(),e("#color-box-background").ColorPicker({onChange:function(o,t,r,i){e("#color-box-background").data("color","#"+t),e("#color-box-background").css({background:e("#color-box-background").data("color")}),e("#av-wrap").css({background:e("#color-box-background").data("color")})},onHide:function(e,t,r,i){o.update_settings(),o.redraw()},onBeforeShow:function(){e(this).ColorPickerSetColor(e(this).data("color")),e(".color-box-selected").removeClass("color-box-selected"),e(this).addClass("color-box-selected"),o.update_settings(),o.redraw()}}),e("#color-box-text-color").ColorPicker({onChange:function(o,t,r,i){e("#color-box-text-color").data("color","#"+t),e("#color-box-text-color").css({background:e("#color-box-text-color").data("color")}),e("#av-wrap").css({color:e("#color-box-text-color").data("color")}),e("#slider-age").css({background:"rgba("+r.r+","+r.g+","+r.b+",0.35)"}),e("#slider-age-bar").css({background:"#"+t}),e("#slider-age-handle").css({background:"#"+t})},onHide:function(e,t,r,i){o.update_settings(),o.redraw()},onBeforeShow:function(){e(this).ColorPickerSetColor(e(this).data("color")),o.update_settings(),o.redraw()}}),e(".color-box").each(function(){e(this).css({background:e(this).data("color")})}),this.load_settings(),this.update_form(),this.redraw(),this.enable_events()},i.prototype.redraw=function(){var o=e.age_verifier_get_content(l);0==e("#editor-preview-container").length&&(e("body").prepend('<div id="editor-preview-container"></div>'),e("#editor-preview-container").css({position:"absolute",left:e("#editor-preview").offset().left,top:e("#editor-preview").offset().top,width:e("#editor-preview").width(),height:e("#editor-preview").height(),padding:"0 15px 0 15px"})),e("#editor-preview-container").html(o),"birthday"==l.mode&&e(".birthday-select").chosen({width:"100%",disable_search_threshold:1e6}),e("#av-error").css({height:"auto"})},i.prototype.disable_events=function(){e(t).off("change","#editor-wrap input, #editor-wrap textarea, #editor-wrap select"),e(o).off("resize"),e(t).off("click","#button-preview"),e(t).off("click","#button-delete-cookies"),e(t).off("mouseover","#av-title, #av-text, #av-error, #av-submit"),e(t).off("mouseout","#av-title, #av-text, #av-error, #av-submit"),e(t).off("mousemove","#av-title, #av-text, #av-error, #av-submit"),e(t).off("click","#editor-preview-container #av-title"),e(t).off("click","#editor-preview-container #av-text"),e(t).off("click","#editor-preview-container #av-error"),e(t).off("click","#editor-preview-container #av-submit"),e(t).off("click","#button-confirm-edit-title"),e(t).off("click","#button-confirm-edit-text"),e(t).off("click","#button-confirm-edit-submit"),e(t).off("click","#button-confirm-edit-error-message"),e(t).off("click",".color-box")},i.prototype.enable_events=function(){var r=this;e(t).on("change","#editor-wrap input, #editor-wrap textarea, #editor-wrap select",function(){r.update_form(),r.update_settings(),r.redraw()}),e(o).on("resize",function(){e("#editor-preview-container").css({position:"absolute",left:e("#editor-preview").offset().left,top:e("#editor-preview").offset().top,width:e("#editor-preview").width(),height:e("#editor-preview").height()})}),e(t).on("click","#button-preview",function(){r.preview()}),e(t).on("click","#button-delete-cookies",function(){r.delete_cookies()});var i=e("#edit-tooltip"),a=e(".bootstrap-wrapper").offset().left,n=e(".bootstrap-wrapper").offset().top;e(t).on("mouseover","#av-title, #av-text, #av-error, #av-submit",function(){i.show()}),e(t).on("mouseout","#av-title, #av-text, #av-error, #av-submit",function(){i.hide()}),e(t).on("mousemove","#av-title, #av-text, #av-error, #av-submit",function(e){i.css({left:e.pageX-a+10,top:e.pageY-n-30})}),e(t).on("click","#editor-preview-container #av-title",function(){r.load_settings(),e("#modal-edit-title").modal()}),e(t).on("click","#editor-preview-container #av-text",function(){r.load_settings(),e("#modal-edit-text").modal()}),e(t).on("click","#editor-preview-container #av-error",function(){r.load_settings(),e("#modal-edit-error").modal()}),e(t).on("click","#editor-preview-container #av-submit",function(){r.load_settings(),e("#modal-edit-submit").modal()}),e(t).on("click","#button-confirm-edit-title",function(){r.update_settings(),r.redraw()}),e(t).on("click","#button-confirm-edit-text",function(){r.update_settings(),r.redraw()}),e(t).on("click","#button-confirm-edit-submit",function(){r.update_settings(),r.redraw()}),e(t).on("click","#button-confirm-edit-error-message",function(){r.update_settings(),r.redraw()}),e(t).on("click",".color-box",function(){e(".color-box-selected").removeClass("color-box-selected"),e(this).addClass("color-box-selected"),r.update_settings(),r.redraw(),e(this).hasClass("image-box")&&r.open_image_upload()}),o.send_to_editor=function(e){jQuery(e).is("img")&&(imgurl=jQuery(e).attr("src"),d.val(imgurl),tb_remove()),jQuery(e).is("a")&&(imgurl=jQuery(e).attr("href"),d.val(imgurl),tb_remove()),jQuery.age_verifier_uploaded_image()}},i.prototype.load_settings=function(){1===parseInt(l.enabled,10)?e("#checkbox-enabled").get(0).checked=!0:e("#checkbox-enabled").get(0).checked=!1,"birthday"==l.mode&&e("#checkbox-mode-birthday").parent().button("toggle"),"age"==l.mode&&e("#checkbox-mode-age").parent().button("toggle"),"confirmation"==l.mode&&e("#checkbox-mode-confirmation").parent().button("toggle"),e("#input-age").val(parseInt(l.minimum_age,10)),e("#input-cookie-expiration").val(parseInt(l.cookie_expiration,10)),e("#input-safe-url").val(l.safe_url),1==parseInt(l.safe_url_enabled,10)?e("#checkbox-safe-url-enabled").get(0).checked=!0:e("#checkbox-safe-url-enabled").get(0).checked=!1,"pop_in"==l.animation&&e("#checkbox-animation-pop-in").parent().button("toggle"),"slide"==l.animation&&e("#checkbox-animation-slide").parent().button("toggle"),"none"==l.animation&&e("#checkbox-animation-none").parent().button("toggle"),e("#input-title").val(l.title);var o=l.text.replace(/\\n/g,"\n");if(e("#textarea-text").val(o),e("#input-submit-button").val(l.submit_text),e("#textarea-error-message").val(l.error_message),"color"==l.background_type){var t=!0;e(".color-box").each(function(){e(this).data("color")==l.background&&(e(".color-box-selected").removeClass("color-box-selected"),e(this).addClass("color-box-selected"),t=!1)}),t&&(e(".color-box-selected").removeClass("color-box-selected"),e("#color-box-background").css({background:l.background}),e("#color-box-background").addClass("color-box-selected"),e("#color-box-background").data("color",l.background))}"image"==l.background_type&&(e(".color-box-selected").removeClass("color-box-selected"),e(".color-box.image-box").addClass("color-box-selected")),e("#input-background-image-url").val(l.background_image_url),e(".image-box-inner").css({"background-image":"url("+l.background_image_url+")"}),e("#color-box-text-color").css({background:l.text_color}),e("#color-box-text-color").data("color",l.text_color),1==parseInt(l.hide_site,10)?e("#checkbox-hide-site").get(0).checked=!0:e("#checkbox-hide-site").get(0).checked=!1},i.prototype.update_form=function(){e(".image-box-inner").css({"background-image":"url("+l.background_image_url+")"})},i.prototype.update_settings=function(){e("#checkbox-enabled").get(0).checked?l.enabled=1:l.enabled=0,e("#checkbox-mode-birthday").get(0).checked&&(l.mode="birthday"),e("#checkbox-mode-age").get(0).checked&&(l.mode="age"),e("#checkbox-mode-confirmation").get(0).checked&&(l.mode="confirmation"),l.minimum_age=parseInt(e("#input-age").val(),10),l.cookie_expiration=parseInt(e("#input-cookie-expiration").val(),10),l.safe_url=e("#input-safe-url").val(),e("#checkbox-safe-url-enabled").get(0).checked?l.safe_url_enabled=1:l.safe_url_enabled=0,e("#checkbox-animation-pop-in").get(0).checked&&(l.animation="pop_in"),e("#checkbox-animation-slide").get(0).checked&&(l.animation="slide"),e("#checkbox-animation-none").get(0).checked&&(l.animation="none"),l.title=e("#input-title").val(),l.text=e("#textarea-text").val(),l.submit_text=e("#input-submit-button").val(),l.error_message=e("#textarea-error-message").val(),e(".color-box-selected").hasClass("image-box")?l.background_type="image":l.background_type="color",e(".color-box-selected").data("color")&&(l.background=e(".color-box-selected").data("color")),l.background_image_url=e("#input-background-image-url").val(),l.text_color=e("#color-box-text-color").data("color"),e("#checkbox-hide-site").get(0).checked?l.hide_site=1:l.hide_site=0},i.prototype.open_image_upload=function(){d=e("#input-background-image-url"),tb_show("","media-upload.php?type=video&TB_iframe=true")},i.prototype.preview=function(){a()&&(localStorage.age_verifier_preview=1),e.AgeVerifier(l)},i.prototype.delete_cookies=function(){var o={action:"delete_cookies"};e.post(ajaxurl,o).done(function(e){})},e(t).ready(function(){})}(jQuery,window,document);